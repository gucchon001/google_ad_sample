"""
メトリクス設定管理ユーティリティ

このモジュールは、スプレッドシートからメトリクス設定を読み込み、
Google Ads APIクエリのためのパラメータを管理します。

主な仕様:
    - スプレッドシート上の設定情報を元に、Google Ads API用の計算フィールドを定義します。
    - 設定構造が変更された場合は、このモジュールの内容も更新する必要があります。

制限事項:
    - スプレッドシートの構造が変更されると、正しく動作しなくなる可能性があります。
"""

# 既存のインポートやその他処理はそのまま残ります。
# 例えば:
# import pandas as pd
# from src.utils.environment import EnvironmentUtils as env
# from src.utils.spreadsheet import SpreadsheetUtils

# -------------------------------------------------------------------
# 既存の計算フィールド定義（例）
CALCULATED_METRICS = {
    # 例: 他の計算フィールドが定義されている場合
    # "conversionRate": {
    #     "name": "CVR",
    #     "calc": "variables['conversions'] / variables['clicks']"
    # },

    # -----------------------------------------------------------------------
    # 追加: 平均クリック単価の計算処理
    # Google Ads APIでは、費用は通常マイクロ単位（micro-units）で提供されます。
    # そのため、費用を1,000,000で割って主要通貨単位に変換した後、クリック数で割る計算式としています。
    # クリック数が0の場合は、0を返すようにしています。
    "averageCpc": {  
        "name": "平均クリック単価",
        "calc": "((費用 / 1000000) / クリック数) if クリック数 > 0 else 0"
    },
    # -----------------------------------------------------------------------

    # 他の計算フィールドの定義が続く...
} 